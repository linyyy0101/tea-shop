webpackJsonp([8],{DSoa:function(t,e,o){"use strict";e.c=function(){return Object(r.a)({url:"/goodsCategoryAdmin/list",method:"get"})},e.a=function(t){return Object(r.a)({url:"/goodsCategoryAdmin",method:"post",data:t})},e.d=function(t,e){return Object(r.a)({url:"/goodsCategoryAdmin/"+t,method:"put",data:e})},e.e=function(t){return Object(r.a)({url:"/goodsCategoryAdmin/showStatus/"+t,method:"put"})},e.b=function(t){return Object(r.a)({url:"/goodsCategoryAdmin/"+t,method:"delete"})};var r=o("dca+")},wa5V:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("mvHQ"),a=o.n(r),n=o("DSoa"),i={name:"goodsCategoryAdminComponent",data:function(){return{goodsCategoryAdmins:[],formDialogVisible:!1,formTitle:"添加",formData:{id:null,name:null,displayOrder:null,showStatus:1},rules:{name:[{required:!0,message:"不能为空",trigger:"blur"}],displayOrder:[{required:!0,message:"显示顺序不能为空",trigger:"blur"}],showStatus:[{required:!0,message:"是否显示不能为空",trigger:"blur"}]}}},mounted:function(){this.getAllGoodsCategoryAdmins()},methods:{getAllGoodsCategoryAdmins:function(){var t=this;Object(n.c)().then(function(e){t.goodsCategoryAdmins=e.data})},resetForm:function(){this.formData={name:null,displayOrder:null,showStatus:1}},toAdd:function(){this.resetForm(),this.formDialogVisible=!0,this.formTitle="添加"},toDelete:function(t){var e=this,o=this;this.$confirm("提示","对应的商品也会一并删除，确定删除吗？",{}).then(function(){Object(n.b)(t).then(function(){e.$notify.success("删除成功"),o.getAllGoodsCategoryAdmins()})}).catch(function(){})},toEdit:function(t){this.formData=JSON.parse(a()(t)),this.formDialogVisible=!0,this.formData.oldName=t.name,this.formTitle="更新"},handelConfirm:function(){var t=this;this.$refs.form.validate(function(e){console.log(t.formTitle),e&&(t.formDialogVisible=!1,t.formTitle.startsWith("添加")?Object(n.a)(t.formData).then(function(e){t.$notify.success("添加成功"),t.getAllGoodsCategoryAdmins()}):t.formTitle.startsWith("更新")&&Object(n.d)(t.formData.oldName,t.formData).then(function(e){t.$notify.success("更新成功"),t.getAllGoodsCategoryAdmins()}))})},commitStatusChange:function(t,e){var o=this;this.$confirm(!1===t?"是否隐藏该类商品？":"是否显示该类商品？").then(function(){Object(n.e)(e.name).then(function(){o.$notify.success(!1===t?"已隐藏":"已开启显示")}).catch(function(){e.showStatus=!e.showStatus})}).catch(function(){e.showStatus=!e.showStatus})}}},s={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticStyle:{"text-align":"left",margin:"5px 10px"}},[o("el-button",{attrs:{size:"mini",type:"primary",round:""},on:{click:t.toAdd}},[t._v("\n      添加\n    ")])],1),t._v(" "),o("el-dialog",{attrs:{title:t.formTitle,visible:t.formDialogVisible},on:{"update:visible":function(e){t.formDialogVisible=e}}},[o("el-form",{ref:"form",attrs:{model:t.formData,rules:t.rules,size:"large","label-width":"100px"}},[o("el-form-item",{attrs:{label:"商品类别",prop:"name"}},[o("el-input",{attrs:{placeholder:"输入商品类别名称"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"显示顺序",prop:"displayOrder"}},[o("el-input",{attrs:{placeholder:"输入显示顺序"},model:{value:t.formData.displayOrder,callback:function(e){t.$set(t.formData,"displayOrder",e)},expression:"formData.displayOrder"}})],1),t._v(" "),o("el-form-item",[o("el-button",{on:{click:t.resetForm}},[t._v("重置")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.handelConfirm}},[t._v("确定")])],1)],1)],1),t._v(" "),o("div",{staticStyle:{margin:"0px 10px","text-align":"left"}},[o("el-table",{attrs:{data:t.goodsCategoryAdmins,stripe:"","default-sort":{prop:"displayOrder",order:"ascending"}}},[o("el-table-column",{attrs:{prop:"name",label:"商品类别名称",sortable:""}}),t._v(" "),o("el-table-column",{attrs:{prop:"displayOrder",label:"显示顺序",sortable:""}}),t._v(" "),o("el-table-column",{attrs:{label:"是否显示该类商品"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-switch",{attrs:{"active-color":"green","inactive-color":"red"},on:{change:function(o){return t.commitStatusChange(o,e.row)}},model:{value:e.row.showStatus,callback:function(o){t.$set(e.row,"showStatus",o)},expression:"scope.row.showStatus"}})]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(o){return t.toEdit(e.row)}}},[t._v("编辑")]),t._v(" "),o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(o){return t.toDelete(e.row.name)}}},[t._v("删除")])]}}])})],1)],1)],1)},staticRenderFns:[]},l=o("VU/8")(i,s,!1,null,null,null);e.default=l.exports}});
//# sourceMappingURL=8.af3170aeaaabdbad81d1.js.map