{"version":3,"sources":["webpack:///./src/api/modules/app/orderInfoAdminApi.js","webpack:///src/components/app/orderHandler/index.vue","webpack:///./src/components/app/orderHandler/index.vue?88d1","webpack:///./src/components/app/orderHandler/index.vue"],"names":["__webpack_exports__","pageNo","pageSize","orderStatus","arguments","length","undefined","url","request","method","orderNo","currentStatus","reason","__WEBPACK_IMPORTED_MODULE_0__utils_axiosRequest_js__","__webpack_require__","orderHandler","name","data","searchParams","searchParam1","total","orderInfoAdmins","currentOrderStatus","showCancelReasonModal","selectedOrder","cancelReason","mounted","this","getOrderInfoAdmins","methods","that","Object","orderInfoAdminApi","then","result","records","changePageNo","changePageSize","toNextOrderStatus","_this","$confirm","$notify","success","catch","queryWeixinOrder","_this2","cancelOrderNotPay","_this3","refundOrder","handelCancelOrder","_this4","app_orderHandler","render","_vm","_h","$createElement","_c","_self","staticStyle","text-align","margin","attrs","size","type","round","on","click","$event","_v","title","visible","update:visible","directives","rawName","value","expression","cols","rows","maxlength","placeholder","domProps","input","target","composing","stripe","default-sort","prop","order","scopedSlots","_u","key","fn","props","label-position","inline","label","_s","row","takeType","goodsPreview","totalPrice","payPrice","createTime","payTime","wxPayTransactionId","sortable","show-overflow-tooltip","width","scope","_e","float","current-page","page-sizes","page-size","layout","current-change","size-change","update:currentPage","$set","update:current-page","update:pageSize","update:page-size","staticRenderFns","Component","normalizeComponent"],"mappings":"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","file":"static/js/6.0270f284747382291ca8.js","sourcesContent":["import request from '@/utils/axiosRequest.js'\r\n\r\n\r\n// 分页查询\r\nexport function getOrderInfoAdmins(pageNo, pageSize, orderStatus = null){\r\n  let url = \"/orderInfoAdmin/page?pageNo=\";\r\n  url = url + (pageNo ? pageNo : \"\");\r\n  url = url + \"&pageSize=\" + (pageSize ? pageSize : \"\");\r\n  if(orderStatus)\r\n    url += \"&orderStatus=\" + orderStatus\r\n  return request({\r\n    url: url,\r\n    method: \"get\"\r\n  })\r\n}\r\n\r\n// 进入订单的下一步\r\nexport function toNextOrderStatus(orderNo, currentStatus) {\r\n  return request({\r\n    url: \"/orderInfoAdmin/nextStatus/\" + orderNo + \"/\" + currentStatus,\r\n    method: \"post\"\r\n  })\r\n}\r\n\r\n// 查询订单状态\r\nexport function queryWeixinOrder(orderNo){\r\n  return request({\r\n    url: \"/orderInfoAdmin/wxPayStatus/\" + orderNo\r\n  })\r\n}\r\n\r\n// 取消没有付款的订单\r\nexport function cancelOrderNotPay(orderNo){\r\n  return request({\r\n    url: \"/orderInfoAdmin/cancelOrderNotPay/\" + orderNo,\r\n    method: \"put\"\r\n  })\r\n}\r\n\r\n// 取消订单并退款\r\nexport function cancelAndRefund(orderNo, reason){\r\n  return request({\r\n    url: \"/orderInfoAdmin/cancelAndRefund/\" + orderNo + \"?reason=\" + reason,\r\n    method: 'put'\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/modules/app/orderInfoAdminApi.js","<template>\r\n  <div>\r\n    <div style=\"text-align: left; margin: 5px 10px\">\r\n      <el-button size=\"mini\" :type=\"currentOrderStatus === '未付款' ? 'info' : ''\"\r\n                 round @click=\"getOrderInfoAdmins('未付款')\">\r\n        未付款\r\n      </el-button>\r\n      <el-button size=\"mini\" :type=\"currentOrderStatus === '制作中' ? 'warning' : ''\"\r\n                 round @click=\"getOrderInfoAdmins('制作中')\">\r\n        制作中\r\n      </el-button>\r\n      <el-button size=\"mini\" :type=\"currentOrderStatus === '配送中' ? 'primary' : ''\"\r\n                 round @click=\"getOrderInfoAdmins('配送中')\">\r\n        配送中\r\n      </el-button>\r\n      <el-button size=\"mini\" :type=\"currentOrderStatus === '请取餐' ? 'success' : ''\"\r\n                 round @click=\"getOrderInfoAdmins('请取餐')\">\r\n        请取餐\r\n      </el-button>\r\n      <el-button size=\"mini\" :type=\"currentOrderStatus === '已送达' ? 'success' : ''\"\r\n                 round @click=\"getOrderInfoAdmins('已送达')\">\r\n        已送达\r\n      </el-button>\r\n      <el-button size=\"mini\" :type=\"currentOrderStatus === '退款中' ? 'danger' : ''\"\r\n                 round @click=\"getOrderInfoAdmins('退款中')\">\r\n        退款中\r\n      </el-button>\r\n    </div>\r\n\r\n\r\n    <!--增加或更新的表单弹窗-->\r\n    <el-dialog title=\"退款取消订单\" :visible.sync=\"showCancelReasonModal\">\r\n      <textarea cols=\"50\" rows=\"10\" maxlength=\"30\" v-model=\"cancelReason\" placeholder=\"输入取消订单的原因...\"></textarea>\r\n      <br>\r\n      <el-button type=\"primary\" @click=\"handelCancelOrder\" round>确定取消</el-button>\r\n    </el-dialog>\r\n\r\n    <!--列表-->\r\n      <div style=\"margin: 0px 10px;text-align: left;\">\r\n        <el-table\r\n                :data=\"orderInfoAdmins\"\r\n                stripe\r\n                :default-sort=\"{prop: 'createTime', order: 'descending'}\">\r\n\r\n          <el-table-column type=\"expand\">\r\n            <template slot-scope=\"props\">\r\n              <el-form label-position=\"left\" inline>\r\n                <el-form-item label=\"订单编号\">\r\n                  <span>{{ props.row.orderNo }}</span>\r\n                </el-form-item>\r\n                <br>\r\n                <el-form-item label=\"取餐方式\">\r\n                  <span>{{ props.row.takeType }}</span>\r\n                </el-form-item>\r\n                <br>\r\n                <el-form-item label=\"商品信息\">\r\n                  <span>{{ props.row.goodsPreview }}</span>\r\n                </el-form-item>\r\n                <br>\r\n                <el-form-item label=\"总价格\">\r\n                  <span>￥{{props.row.totalPrice /100 }}</span>\r\n                </el-form-item>\r\n                <br>\r\n                <el-form-item label=\"支付金额\">\r\n                  <span>￥{{ props.row.payPrice / 100}}</span>\r\n                </el-form-item>\r\n                <br>\r\n                <el-form-item label=\"下单时间\">\r\n                  <span>{{ props.row.createTime }}</span>\r\n                </el-form-item>\r\n                <br>\r\n                <el-form-item label=\"支付时间\">\r\n                  <span>{{ props.row.payTime }}</span>\r\n                </el-form-item>\r\n                <br>\r\n                <el-form-item label=\"微信订单号\">\r\n                  <span>{{ props.row.wxPayTransactionId }}</span>\r\n                </el-form-item>\r\n              </el-form>\r\n\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column prop=\"orderStatus\" label=\"订单状态\"></el-table-column>\r\n          <el-table-column prop=\"addressDetail\" label=\"收货地址\" sortable></el-table-column>\r\n          <el-table-column prop=\"goodsPreview\" label=\"商品信息\"></el-table-column>\r\n          <el-table-column prop=\"goodsTotalNum\" label=\"商品总数\" sortable></el-table-column>\r\n          <el-table-column prop=\"verifyNum\" label=\"取单号\"></el-table-column>\r\n          <el-table-column prop=\"createTime\" label=\"下单时间\" sortable></el-table-column>\r\n          <el-table-column prop=\"payTime\" label=\"支付时间\" sortable></el-table-column>\r\n          <el-table-column prop=\"userPhone\" label=\"用户电话\" show-overflow-tooltip></el-table-column>\r\n          <el-table-column prop=\"receiver\" label=\"取餐人\" sortable></el-table-column>\r\n          <el-table-column prop=\"extraInfo\" label=\"订单备注\"></el-table-column>\r\n          <el-table-column label=\"操作\" width=\"150\">\r\n            <template slot-scope=\"scope\">\r\n            <span v-if=\"scope.row.orderStatus == '未付款'\">\r\n              <el-button type=\"text\" size=\"mini\" @click=\"queryWeixinOrder(scope.row.orderNo)\"\r\n              >查询支付状态\r\n              </el-button>\r\n              <el-button type=\"text\" size=\"mini\" @click=\"cancelOrderNotPay(scope.row.orderNo)\"\r\n              >取消\r\n              </el-button>\r\n            </span>\r\n              <span v-else-if=\"scope.row.orderStatus != '退款中'\">\r\n              <el-button type=\"text\" size=\"mini\" @click=\"toNextOrderStatus(scope.row)\">下一步</el-button>\r\n            <el-button type=\"text\" size=\"mini\" @click=\"refundOrder(scope.row)\"\r\n                       v-if=\"scope.row.orderStatus != '未付款' && scope.row.orderStatus != '退款中'\">\r\n              退款\r\n            </el-button>\r\n            </span>\r\n            </template>\r\n          </el-table-column>\r\n\r\n        </el-table>\r\n        <!--分页组件-->\r\n        <el-row style=\"float: right\">\r\n          <el-pagination\r\n                  @current-change=\"changePageNo\"\r\n                  @size-change=\"changePageSize\"\r\n                  :current-page.sync=\"searchParams.pageNo\"\r\n                  :page-sizes=\"[5, 10, 20, 30, 50, 100]\"\r\n                  :page-size.sync=\"searchParams.pageSize\"\r\n                  layout=\"total, sizes, prev, pager, next, jumper\"\r\n                  :total=\"total\">\r\n          </el-pagination>\r\n        </el-row>\r\n\r\n\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    queryWeixinOrder,\r\n    getOrderInfoAdmins,\r\n    toNextOrderStatus,\r\n    cancelAndRefund,\r\n    cancelOrderNotPay\r\n  } from \"@/api/modules/app/orderInfoAdminApi.js\";\r\n\r\n  export default {\r\n    name: \"orderInfoAdminComponent\",\r\n    data() {\r\n      return {\r\n        // 查询参数\r\n        searchParams: {\r\n          searchParam1: null,\r\n          pageNo: 1,\r\n          pageSize: 10,\r\n        },\r\n        total: 0,\r\n        orderInfoAdmins: [],\r\n        currentOrderStatus: '制作中',\r\n        showCancelReasonModal: false,\r\n        selectedOrder: null,\r\n        cancelReason: '', // 取消订单原因\r\n      }\r\n    },\r\n    mounted() {\r\n      this.getOrderInfoAdmins(this.currentOrderStatus)\r\n    },\r\n    methods: {\r\n      // 获取数据\r\n      getOrderInfoAdmins(orderStatus = null) {\r\n        let that = this;\r\n        that.currentOrderStatus = orderStatus;\r\n        getOrderInfoAdmins(that.searchParams.pageNo, that.searchParams.pageSize, orderStatus).then(result => {\r\n          that.orderInfoAdmins = result.data.records;\r\n          that.total = result.data.total;\r\n        })\r\n      },\r\n      // 切换页数\r\n      changePageNo(pageNo) {\r\n        this.searchParams.pageNo = pageNo;\r\n        this.getOrderInfoAdmins()\r\n      },\r\n      // 改变页面大小\r\n      changePageSize(pageSize) {\r\n        this.searchParams.pageSize = pageSize;\r\n        this.getOrderInfoAdmins()\r\n      },\r\n      // 进入订单的下一步\r\n      toNextOrderStatus(selectedOrder) {\r\n        let that = this;\r\n        if (selectedOrder.orderStatus === '未付款') {\r\n          this.$confirm(\"用户并未付款, 请确保已经线下付款或其他方式支付\", \"是否继续?\", {}).then(() => {\r\n            this.$confirm(\"订单目前的状态为: \" + selectedOrder.orderStatus, \"请再次确认是否继续\", {}).then(() => {\r\n              toNextOrderStatus(selectedOrder.orderNo, selectedOrder.orderStatus).then(result => {\r\n                this.$notify.success(\"订单状态已标记为: \" + result.data);\r\n                that.getOrderInfoAdmins(selectedOrder.orderStatus);\r\n              })\r\n            }).catch(() => {\r\n            })\r\n          }).catch(() => {\r\n          })\r\n        } else {\r\n          this.$confirm(\"订单目前的状态为: \" + selectedOrder.orderStatus, \"是否进入下一步\", {}).then(() => {\r\n            toNextOrderStatus(selectedOrder.orderNo, selectedOrder.orderStatus).then(result => {\r\n              this.$notify.success(\"订单状态已标记为: \" + result.data);\r\n              that.getOrderInfoAdmins(selectedOrder.orderStatus);\r\n            })\r\n          }).catch(() => {\r\n          })\r\n        }\r\n      },\r\n      // 查看微信支付状态\r\n      queryWeixinOrder(orderNo) {\r\n        let that = this;\r\n        queryWeixinOrder(orderNo).then(result => {\r\n          this.$notify.success(\"微信订单的支付状态为: \" + result.data);\r\n          that.getOrderInfoAdmins('未付款');\r\n        })\r\n      },\r\n      // 取消没有付款的订单\r\n      cancelOrderNotPay(orderNo){\r\n        let that = this;\r\n        this.$confirm(\"\", \"取消订单(请确保该订单未支付)，是否取消？\", {}).then(() => {\r\n          cancelOrderNotPay(orderNo).then(result => {\r\n            this.$notify.success( result.data);\r\n            that.getOrderInfoAdmins('未付款');\r\n          })\r\n        }).catch(() => {\r\n        })\r\n      },\r\n      // 退款取消订单\r\n      refundOrder(selectedOrder) {\r\n        let that = this;\r\n        this.selectedOrder = selectedOrder;\r\n        this.$confirm(\"\", \"是否退款取消该订单\", {}).then(() => {\r\n          that.showCancelReasonModal = true;\r\n        }).catch(() => {\r\n        })\r\n      },\r\n      // 确认取消订单\r\n      handelCancelOrder() {\r\n        let that = this;\r\n        that.showCancelReasonModal = false;\r\n        cancelAndRefund(that.selectedOrder.orderNo, that.cancelReason).then(result => {\r\n          this.$notify.success(result.data);\r\n          that.getOrderInfoAdmins('制作中');\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/app/orderHandler/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"text-align\":\"left\",\"margin\":\"5px 10px\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":_vm.currentOrderStatus === '未付款' ? 'info' : '',\"round\":\"\"},on:{\"click\":function($event){return _vm.getOrderInfoAdmins('未付款')}}},[_vm._v(\"\\n      未付款\\n    \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":_vm.currentOrderStatus === '制作中' ? 'warning' : '',\"round\":\"\"},on:{\"click\":function($event){return _vm.getOrderInfoAdmins('制作中')}}},[_vm._v(\"\\n      制作中\\n    \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":_vm.currentOrderStatus === '配送中' ? 'primary' : '',\"round\":\"\"},on:{\"click\":function($event){return _vm.getOrderInfoAdmins('配送中')}}},[_vm._v(\"\\n      配送中\\n    \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":_vm.currentOrderStatus === '请取餐' ? 'success' : '',\"round\":\"\"},on:{\"click\":function($event){return _vm.getOrderInfoAdmins('请取餐')}}},[_vm._v(\"\\n      请取餐\\n    \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":_vm.currentOrderStatus === '已送达' ? 'success' : '',\"round\":\"\"},on:{\"click\":function($event){return _vm.getOrderInfoAdmins('已送达')}}},[_vm._v(\"\\n      已送达\\n    \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":_vm.currentOrderStatus === '退款中' ? 'danger' : '',\"round\":\"\"},on:{\"click\":function($event){return _vm.getOrderInfoAdmins('退款中')}}},[_vm._v(\"\\n      退款中\\n    \")])],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"退款取消订单\",\"visible\":_vm.showCancelReasonModal},on:{\"update:visible\":function($event){_vm.showCancelReasonModal=$event}}},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.cancelReason),expression:\"cancelReason\"}],attrs:{\"cols\":\"50\",\"rows\":\"10\",\"maxlength\":\"30\",\"placeholder\":\"输入取消订单的原因...\"},domProps:{\"value\":(_vm.cancelReason)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.cancelReason=$event.target.value}}}),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"round\":\"\"},on:{\"click\":_vm.handelCancelOrder}},[_vm._v(\"确定取消\")])],1),_vm._v(\" \"),_c('div',{staticStyle:{\"margin\":\"0px 10px\",\"text-align\":\"left\"}},[_c('el-table',{attrs:{\"data\":_vm.orderInfoAdmins,\"stripe\":\"\",\"default-sort\":{prop: 'createTime', order: 'descending'}}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('el-form',{attrs:{\"label-position\":\"left\",\"inline\":\"\"}},[_c('el-form-item',{attrs:{\"label\":\"订单编号\"}},[_c('span',[_vm._v(_vm._s(props.row.orderNo))])]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"取餐方式\"}},[_c('span',[_vm._v(_vm._s(props.row.takeType))])]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商品信息\"}},[_c('span',[_vm._v(_vm._s(props.row.goodsPreview))])]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"总价格\"}},[_c('span',[_vm._v(\"￥\"+_vm._s(props.row.totalPrice /100))])]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"支付金额\"}},[_c('span',[_vm._v(\"￥\"+_vm._s(props.row.payPrice / 100))])]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"下单时间\"}},[_c('span',[_vm._v(_vm._s(props.row.createTime))])]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"支付时间\"}},[_c('span',[_vm._v(_vm._s(props.row.payTime))])]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"微信订单号\"}},[_c('span',[_vm._v(_vm._s(props.row.wxPayTransactionId))])])],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"orderStatus\",\"label\":\"订单状态\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"addressDetail\",\"label\":\"收货地址\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"goodsPreview\",\"label\":\"商品信息\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"goodsTotalNum\",\"label\":\"商品总数\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"verifyNum\",\"label\":\"取单号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"下单时间\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"payTime\",\"label\":\"支付时间\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"userPhone\",\"label\":\"用户电话\",\"show-overflow-tooltip\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"receiver\",\"label\":\"取餐人\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"extraInfo\",\"label\":\"订单备注\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.orderStatus == '未付款')?_c('span',[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.queryWeixinOrder(scope.row.orderNo)}}},[_vm._v(\"查询支付状态\\n            \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.cancelOrderNotPay(scope.row.orderNo)}}},[_vm._v(\"取消\\n            \")])],1):(scope.row.orderStatus != '退款中')?_c('span',[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.toNextOrderStatus(scope.row)}}},[_vm._v(\"下一步\")]),_vm._v(\" \"),(scope.row.orderStatus != '未付款' && scope.row.orderStatus != '退款中')?_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.refundOrder(scope.row)}}},[_vm._v(\"\\n            退款\\n          \")]):_vm._e()],1):_vm._e()]}}])})],1),_vm._v(\" \"),_c('el-row',{staticStyle:{\"float\":\"right\"}},[_c('el-pagination',{attrs:{\"current-page\":_vm.searchParams.pageNo,\"page-sizes\":[5, 10, 20, 30, 50, 100],\"page-size\":_vm.searchParams.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"current-change\":_vm.changePageNo,\"size-change\":_vm.changePageSize,\"update:currentPage\":function($event){return _vm.$set(_vm.searchParams, \"pageNo\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.searchParams, \"pageNo\", $event)},\"update:pageSize\":function($event){return _vm.$set(_vm.searchParams, \"pageSize\", $event)},\"update:page-size\":function($event){return _vm.$set(_vm.searchParams, \"pageSize\", $event)}}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a445e37c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/app/orderHandler/index.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a445e37c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/app/orderHandler/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}