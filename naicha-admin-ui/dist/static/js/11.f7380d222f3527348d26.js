webpackJsonp([11],{LOvt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),r=a.n(n),s=a("dca+");function i(e){return Object(s.a)({url:"/userAdmin",method:"put",data:e})}var o={name:"userAdminComponent",data:function(){return{searchParams:{searchParam1:null,pageNo:1,pageSize:10},total:0,userAdmins:[],formDialogVisible:!1,formTitle:"添加",formData:{wxOpenid:null,name:null,phone:null,sex:null,wxAvatar:null,status:null},rules:{name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],phone:[{required:!0,message:"手机号不能为空",trigger:"blur"}]}}},mounted:function(){this.getUserAdmins()},methods:{getUserAdmins:function(){var e,t,a,n=this;(e=n.searchParams.pageNo,t=n.searchParams.pageSize,a="/userAdmin/page?pageNo=",a=(a+=e||"")+"&pageSize="+(t||""),Object(s.a)({url:a,method:"get"})).then(function(e){n.userAdmins=e.data.records,n.total=e.data.total})},changePageNo:function(e){this.searchParams.pageNo=e,this.getUserAdmins()},changePageSize:function(e){this.searchParams.pageSize=e,this.getUserAdmins()},clearSearchParams:function(){this.searchParams.searchParam1=null},resetForm:function(){this.formData={wxOpenid:null,name:null,phone:null,sex:null,wxAvatar:null,status:null}},toAdd:function(){this.resetForm(),this.formDialogVisible=!0,this.formTitle="添加"},toDelete:function(e){var t=this,a=this;this.$confirm("提示","是否删除",{}).then(function(){var n;(n=[e],Object(s.a)({url:"/userAdmin/"+n,method:"delete",data:userAdminIdList})).then(function(){t.$notify.success("删除成功"),a.getUserAdmins()})}).catch(function(){})},toEdit:function(e){this.formData=JSON.parse(r()(e)),this.formDialogVisible=!0,this.formTitle="更新"},handelConfirm:function(){var e=this;this.$refs.form.validate(function(t){var a;(console.log(e.formTitle),t)&&(e.formDialogVisible=!1,e.formTitle.startsWith("添加")?(a=e.formData,Object(s.a)({url:"/userAdmin",method:"post",data:a})).then(function(t){e.$notify.success("添加成功"),e.getUserAdmins()}):e.formTitle.startsWith("更新")&&i(e.formData).then(function(t){e.$notify.success("更新成功"),e.getUserAdmins()}))})},commitStatusChange:function(e,t){var a=this;this.$confirm(!1===e?"冻结？":"激活？").then(function(){i({wxOpenid:t.wxOpenid,status:t.status}).then(function(){a.$notify.success(!1===e?"已冻结":"已激活")}).catch(function(){t.status=!t.status})}).catch(function(){t.status=!t.status})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"text-align":"left",margin:"5px 10px"}}),e._v(" "),a("el-dialog",{attrs:{title:e.formTitle,visible:e.formDialogVisible},on:{"update:visible":function(t){e.formDialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,size:"large","label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"姓名"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{placeholder:"手机号"},model:{value:e.formData.phone,callback:function(t){e.$set(e.formData,"phone",t)},expression:"formData.phone"}})],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handelConfirm}},[e._v("确定")])],1)],1)],1),e._v(" "),a("div",{staticStyle:{margin:"0px 10px","text-align":"left"}},[a("el-table",{attrs:{data:e.userAdmins,stripe:"","default-sort":{prop:"name",order:"ascending"}}},[a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wxAvatar",label:"微信头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:e.row.wxAvatar,alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"账号状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"green","inactive-color":"red"},on:{change:function(a){return e.commitStatusChange(a,t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.toEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.toDelete(t.row.wxOpenid)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-row",{staticStyle:{float:"right"}},[a("el-pagination",{attrs:{"current-page":e.searchParams.pageNo,"page-sizes":[5,10,20,30,50,100],"page-size":e.searchParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.changePageNo,"size-change":e.changePageSize,"update:currentPage":function(t){return e.$set(e.searchParams,"pageNo",t)},"update:current-page":function(t){return e.$set(e.searchParams,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.searchParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.searchParams,"pageSize",t)}}})],1)],1)],1)},staticRenderFns:[]},u=a("VU/8")(o,l,!1,null,null,null);t.default=u.exports}});
//# sourceMappingURL=11.f7380d222f3527348d26.js.map